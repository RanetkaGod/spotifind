(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/spotifind/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0b2f":function(t,e,a){"use strict";a("8592")},"0c3b":function(t,e,a){t.exports=a.p+"img/spotify.30734286.png"},"0e18":function(t,e,a){"use strict";a("21e7")},"17fc":function(t,e,a){},"21e7":function(t,e,a){},"23a3":function(t,e,a){"use strict";a("a929")},"2a6b":function(t,e,a){},"3ad3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"vm",(function(){return he}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"page-wrapper"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view",{attrs:{name:"navPanel"}})],1),a("div",{staticClass:"content-wrapper"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)])},s=[],o=(a("a15b"),a("d81d"),a("b0c0"),a("4fad"),a("3835")),i=(a("96cf"),a("1da1")),c=a("bc3a"),u=a.n(c),l="Basic ZjRhYmMyN2VjY2Q4NDEyNDllYTZhZDA0ZmJjNzI0MjU6MDY5YmE5YjQ3ZGU0NGU3NjliNjM4MDgzMGM3YzIwZGM=",d="f4abc27eccd841249ea6ad04fbc72425",p=(a("d3b7"),a("2f62"));n["a"].use(p["a"]);var m=new p["a"].Store({strict:!0,state:{foundResults:null,activeTrack:{},loading:{search:!1,recs:!1},recommendations:null,searchInputFocused:!1,genres:[],selected_genres:null,filters:null,logged:!1},mutations:{updateResults:function(t,e){t.foundResults=e},setFilterValuesByKey:function(t,e){var a=e.key,n=e.value;t.filters[a].value=parseFloat(n)},setFilterValues:function(t,e){t.filters=e},changeFilterState:function(t,e){var a=Object(o["a"])(e,2),n=a[0],r=a[1];t.filters[n].enabled=r},chooseActiveTrack:function(t,e){t.activeTrack=e},changeLoadingState:function(t,e){var a=e.component,n=e.isLoading;t.loading[a]=n},updateRecommendations:function(t,e){t.recommendations=e},searchInputFocus:function(t,e){t.searchInputFocused=e},setGenres:function(t,e){t.genres=e},selectGenres:function(t,e){t.selected_genres=e},disableFilters:function(t){for(var e=0,a=Object.entries(t.filters);e<a.length;e++){var n=Object(o["a"])(a[e],2),r=(n[0],n[1]);r.enabled=!1}},initFilters:function(t){for(var e={},a=["acousticness","danceability","energy","instrumentalness","liveness","speechiness","tempo","valence"],n=0,r=a;n<r.length;n++){var s=r[n];e[s]={value:null,enabled:!1}}t.filters=e},setLoggedState:function(t,e){t.logged=e}},actions:{updateResults:function(t,e){var a=t.commit;return new Promise((function(t,n){a("updateResults",e),t()}))},setFilterValuesByKey:function(t,e){var a=t.commit,n=Object(o["a"])(e,2),r=n[0],s=n[1];a("setFilterValuesByKey",{key:r,value:s})},changeFilterState:function(t,e){var a=t.commit,n=Object(o["a"])(e,2),r=n[0],s=n[1];a("changeFilterState",[r,s])},chooseActiveTrack:function(t,e){var a=t.commit;a("disableFilters"),a("selectGenres",null),a("chooseActiveTrack",e)},changeLoadingState:function(t,e){var a=t.commit;a("changeLoadingState",e)},updateRecommendations:function(t,e){var a=t.commit;a("updateRecommendations",e)},searchInputFocus:function(t,e){var a=t.commit;a("searchInputFocus",e)},setRecommendationsDataFromStore:function(t,e){var a=t.commit;a("setFilterValues",e.filters),a("chooseActiveTrack",e.active_track),a("updateRecommendations",e.recommendations),a("selectGenres",e.genres)},setGenres:function(t,e){var a=t.commit;a("setGenres",e)},selectGenres:function(t,e){var a=t.commit;a("selectGenres",e)},initFilters:function(t){var e=t.commit;e("initFilters")},setLoggedState:function(t,e){var a=t.commit;a("setLoggedState",e)}}}),f=m;function h(t){window.localStorage.setItem("recommendations_data",JSON.stringify({filters:t.state.filters,recommendations:t.state.recommendations,active_track:t.state.activeTrack,genres:t.state.selected_genres}))}a("99af"),a("4160"),a("fb6a"),a("ac1f"),a("1276"),a("159b");var g="https://accounts.spotify.com/",v=new Event("setUserData");function b(){return k.apply(this,arguments)}function k(){return k=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="user-read-currently-playing user-read-playback-state playlist-modify-public playlist-modify-private streaming user-read-email user-read-private",n=encodeURIComponent(e),t.next=4,h(f);case 4:window.open(g+"authorize?client_id=".concat(d,"&response_type=token&scope=").concat(n,"&redirect_uri=").concat(window.location.protocol,"//").concat(window.location.host).concat(a("5f35").publicPath),"spoty_auth","width=600,height=400");case 5:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function w(){return _.apply(this,arguments)}function _(){return _=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.access_data),t.next=3,S({method:"GET",url:C+"me",headers:{Authorization:e.token_type+" "+e.access_token}}).then((function(t){var e=JSON.stringify(t.data);window.localStorage.setItem("user_data",e),window.dispatchEvent(v)}),(function(t){console.log(t)}));case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function y(t){return x.apply(this,arguments)}function x(){return x=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={},!e.path){t.next=9;break}if(n=e.path.split(/[/ & =]/gm).slice(1),"access_token"!==n[0]){t.next=9;break}return n.forEach((function(t,e){e<5&&!(e%2)&&(a[t]=n[e+1])})),window.localStorage.setItem("access_data",JSON.stringify(a)),t.next=8,w();case 8:window.close();case 9:if(window.localStorage.user_data||!window.localStorage.access_data){t.next=12;break}return t.next=12,w();case 12:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}var C="https://api.spotify.com/v1/",S=u.a.create({baseURL:C,timeout:1e3});function R(){console.log("Interceptors set"),S.interceptors.response.use((function(t){return console.log("api:",t),t}),function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(401!==e.response.status){t.next=4;break}return h(f),t.next=4,b();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){console.log("always happen")}))}var $="https://api.spotify.com/v1/",O=JSON.parse(window.localStorage.getItem("token")),T={methods:{access_data:function(){return JSON.parse(window.localStorage.access_data)},authorization_token:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(O){t.next=3;break}return t.next=3,this.getToken();case 3:return t.abrupt("return",O.token_type+" "+O.access_token);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getToken:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u()({method:"POST",url:"https://accounts.spotify.com/api/token",headers:{Authorization:l,"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=client_credentials"}).then((function(t){window.localStorage.setItem("token",JSON.stringify(t.data)),O=JSON.parse(window.localStorage.getItem("token"))}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),writeToken:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("undefined"!==O&&null!==O&&void 0!==O){t.next=3;break}return t.next=3,this.getToken();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getSearchData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=u.a,t.t1=$+"search",t.t2={q:e,type:a},t.next=5,this.authorization_token();case 5:t.t3=t.sent,t.t4={Authorization:t.t3},t.t5={method:"GET",url:t.t1,params:t.t2,headers:t.t4},(0,t.t0)(t.t5).then((function(t){n.writeSearchResultToStorage(t.data)})).catch(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(r.response.status),401!==r.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,n.getToken();case 5:return t.next=7,n.getSearchData(e,a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),writeSearchResultToStorage:function(t){this.$store.dispatch("updateResults",t).then((function(){console.log(t)}))},getRecommendationsData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n,r,s,c,l,d,p,m,f,h=this,g=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=g.length>1&&void 0!==g[1]?g[1]:null,r="",s=0,c=Object.entries(a);s<c.length;s++)l=Object(o["a"])(c[s],2),d=l[0],p=l[1],p.enabled&&(r+="&target_"+d+"="+p.value);return m=this.$store.state.selected_genres,f="",m&&(f="&seed_genres=".concat(m.join(","))),this.$store.dispatch("changeLoadingState",{component:"recs",isLoading:!0}),t.next=9,this.writeToken();case 9:return t.t0=u.a,t.t1=$+"recommendations?seed_tracks="+e+r+"&limit=50"+f,t.next=13,this.authorization_token();case 13:return t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},t.next=18,(0,t.t0)(t.t4).then((function(t){console.log(t),n=t.data})).catch(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,h.getToken();case 5:return t.next=7,h.getRecommendationsData(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){h.$store.dispatch("changeLoadingState",{component:"recs",isLoading:!1})}));case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAudioFeatures:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=null,t.next=3,this.writeToken();case 3:return t.t0=u.a,t.t1=$+"audio-features/"+e,t.next=7,this.authorization_token();case 7:return t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},t.next=12,(0,t.t0)(t.t4).then((function(t){return a=t.data,a})).catch(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,n.getToken();case 5:return t.next=7,n.getAudioFeatures(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCurrentPlayback:function(){S({method:"GET",url:$+"me/player/",headers:{Authorization:this.access_data.token_type+" "+this.access_data.access_token}}).then((function(t){return console.log(t)}))},createNewPlaylist:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(window.localStorage.user_data),a=this,n=null,t.next=5,u()({method:"POST",url:$+"users/".concat(e.id,"/playlists"),headers:{Authorization:a.access_data().token_type+" "+a.access_data().access_token,"Content-Type":"application/json"},data:{name:"".concat(a.$store.state.activeTrack.name," playlist by Spotifind"),public:!0}}).then((function(t){n=t}),(function(t){401===t.response.status&&b()}));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addRecommendedTracksToPlaylist:function(t){var e=this.$store.state.recommendations.tracks.map((function(t){return t.uri}));return e.unshift(this.$store.state.activeTrack.uri),S({method:"POST",url:$+"playlists/".concat(t,"/tracks"),headers:{Authorization:this.access_data().token_type+" "+this.access_data().access_token,"Content-Type":"application/json"},data:{uris:e}})},createRecsPlaylist:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.createNewPlaylist();case 3:if(e=t.sent,e){t.next=8;break}window.addEventListener("storage",(function(t){"access_data"===t.key&&n.createRecsPlaylist()}),{once:!0}),t.next=13;break;case 8:return t.next=10,this.addRecommendedTracksToPlaylist(e.data.id);case 10:a=t.sent,201===a.status&&(this.message="Saved to Your library"),this.loading=!1;case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAvailableGenres:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=u.a,t.t1=$+"recommendations/available-genre-seeds",t.next=4,this.authorization_token();case 4:t.t2=t.sent,t.t3={Authorization:t.t2},t.t4={method:"GET",url:t.t1,headers:t.t3},(0,t.t0)(t.t4).then((function(t){e.$store.dispatch("setGenres",t.data.genres)})).catch(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.response.status),401!==a.response.status){t.next=7;break}return window.localStorage.removeItem("token"),t.next=5,e.getToken();case 5:return t.next=7,e.getAvailableGenres();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},j=T,P={mixins:[j],name:"App",created:function(){window.localStorage.token||this.getToken()},mounted:function(){this.$store.state.filters||(this.getAvailableGenres(),this.$store.dispatch("initFilters"))}},E=P,F=(a("cf25"),a("2877")),I=Object(F["a"])(E,r,s,!1,null,null,null),A=I.exports,N=a("8c4f"),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recommendations-wrapper"},[t.$store.state.recommendations?a("filters-block"):t._e(),a("div",{staticClass:"recommendations-list-wrapper"},[a("transition",{attrs:{name:"fade-slide",mode:"out-in"}},[t.$store.state.recommendations&&!t.$store.state.loading.recs?a("recommendation-list",{attrs:{tracks:t.$store.state.recommendations.tracks}}):t._e()],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.$store.state.loading.recs?a("loading-component"):t._e()],1)],1)],1)},G=[],z=(a("b64b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recommendations-list-wrapper"},[a("div",{staticClass:"recommendations-list"},t._l(t.tracks,(function(t){return a("track-card",{key:t.id,attrs:{track:t,form:"sqr"}})})),1)])}),M=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"track-card-wrapper",class:{sqr:"sqr"===t.form,rec:"rec"===t.form,filter_panel:t.filter_panel},on:{mousedown:function(e){"rec"!==t.form||t.filter_panel?t.openInApp(t.track.uri):t.chooseActiveTrack(t.track)}}},[a("div",{staticClass:"track-card",class:{active:t.$store.state.activeTrack.id===t.track.id&&!t.filter_panel}},[a("div",{staticClass:"track-card-inner"},[a("div",{staticClass:"track-image-wrapper"},["rec"===t.form?a("img",{staticClass:"track-image",attrs:{src:t.track.album.images[1].url,alt:"Обложка композиции"}}):t._e(),a("div",{staticClass:"card-hover-wrapper"},["sqr"===t.form?a("card-hover",{attrs:{"image-src":t.track.album.images[1].url}}):t._e()],1)]),a("div",{staticClass:"track-info"},[a("div",{staticClass:"track-name-wrapper"},[a("span",{staticClass:"track-name"},[t._v(t._s(t.track.name))])]),a("div",{staticClass:"track-artist-wrapper"},t._l(t.track.artists,(function(e,n){return a("span",{key:e.id,staticClass:"track-artist"},[t._v(" "+t._s(e.name)+t._s(n<t.track.artists.length-1?", ":"")+" ")])})),0),"rec"===t.form?a("div",{staticClass:"track-uri-wrapper"},[a("div",{staticClass:"track-uri"},[a("a",{on:{mousedown:function(e){return t.openInSpotify(e,t.track.uri)}}},[a("img",{staticClass:"spotify-logo",attrs:{src:t.$store.state.activeTrack.id!==t.track.id||t.filter_panel?t.spotify_logo_default:t.spotify_logo_white,alt:"Open in app"}})])])]):t._e()])])])])},J=[],B=a("0c3b"),V=a.n(B),Y=a("dbbb"),U=a.n(Y),Z=a("647d"),q=a.n(Z),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-lift"},[a("div",{staticClass:"tw-lift__card",style:t.backgroundStyle(t.cardColor)},[t.imageSrc?a("img",{staticClass:"tw-lift__card__image",attrs:{src:t.imageSrc}}):t._e()]),a("div",{staticClass:"tw-lift__substrate",style:t.backgroundStyle(t.substrateColor)}),a("div",{staticClass:"tw-lift__corner tw-lift__corner--top-left",style:t.cornerStyle(t.substrateColor,"right")}),a("div",{staticClass:"tw-lift__corner tw-lift__corner--bottom-right",style:t.cornerStyle(t.substrateColor,"top")})])},H=[],Q={name:"CardHover",props:{substrateColor:{type:String,default:"#1db954"},cardColor:{type:String,default:"#1db954"},imageSrc:{type:String,default:null}},methods:{backgroundStyle:function(t){return"background-color: "+t},cornerStyle:function(t,e){return"border-".concat(e,"-color: ").concat(t)}}},W=Q,X=(a("b2fd"),Object(F["a"])(W,K,H,!1,null,"4162cd7a",null)),tt=X.exports,et={name:"TrackCard",components:{CardHover:tt},mixins:[j],props:{track:Object,form:String,filter_panel:Boolean},data:function(){return{spotify_logo_black:U.a,spotify_logo_white:q.a,spotify_logo_default:V.a}},methods:{openInSpotify:function(t,e){t.stopPropagation(),window.open(e,"_self")},openInApp:function(t){location.href=t},getRecommendations:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAudioFeatures(this.$store.state.activeTrack.id);case 2:e=t.sent,a=0,n=Object.entries(this.$store.state.filters);case 4:if(!(a<n.length)){t.next=11;break}return r=Object(o["a"])(n[a],2),s=r[0],r[1],t.next=8,this.$store.dispatch("setFilterValuesByKey",[s,e[s]]);case 8:a++,t.next=4;break;case 11:return t.t0=this.$store,t.next=14,this.getRecommendationsData(this.$store.state.activeTrack.id,this.$store.state.filters);case 14:return t.t1=t.sent,t.next=17,t.t0.dispatch.call(t.t0,"updateRecommendations",t.t1);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),chooseActiveTrack:function(t){this.$store.dispatch("chooseActiveTrack",t),this.$store.dispatch("searchInputFocus",!1),this.getRecommendations(),fe.push("recommendations")}}},at=et,nt=(a("b88f"),Object(F["a"])(at,D,J,!1,null,"58b1fd8d",null)),rt=nt.exports,st={props:["tracks"],name:"RecommendationList",components:{TrackCard:rt}},ot=st,it=(a("b0c6"),Object(F["a"])(ot,z,M,!1,null,"4ac9de3c",null)),ct=it.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"load-wrapper"},[a("div",{staticClass:"load-icon-wrapper",style:t.circleSize(t.size)},[a("div",{staticClass:"circle load-circle",style:t.circleStyle(t.thickness,t.colorMain)}),a("div",{staticClass:"circle load-circle-part",style:t.circlePartsStyle(t.thickness,t.colorPart,t.circleParts)})])])},lt=[],dt=(a("a9e3"),{name:"LoadingComponent",props:{size:{type:Number,default:30},thickness:{type:Number,default:4},colorMain:{type:String,default:"#23D460"},colorPart:{type:String,default:"#1DB954"},circleParts:{type:Array,maxLength:4,default:function(){return["right","bottom"]}}},methods:{circleSize:function(t){return"width: ".concat(t,"px; height: ").concat(t,"px;")},circleThickness:function(t){return"border-width: ".concat(t,"px;")},circlePartsColor:function(t,e){var a="";return e.forEach((function(e){a+="border-".concat(e,"-color: ").concat(t,";")})),a},circleStyle:function(t,e){return this.circleThickness(t)+"border-color: ".concat(e,";")},circlePartsStyle:function(t,e,a){return this.circleThickness(t)+this.circlePartsColor(e,a)}}}),pt=dt,mt=(a("23a3"),Object(F["a"])(pt,ut,lt,!1,null,"61636d47",null)),ft=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filters-wrapper"},[a("track-card",{staticClass:"filter-active-card",attrs:{filter_panel:!0,form:"rec",track:t.$store.state.activeTrack}}),a("div",{staticClass:"filters"},[a("div",{staticClass:"filters-grid"},[t._l(t.$store.state.filters,(function(e,n){return[a("span",{key:"name"+n,staticClass:"filter-name",class:{disabled:!e.enabled},on:{click:function(a){return t.changeFilterState(e,n)}}},[t._v(" "+t._s(n)+" ")]),a("div",{key:n,staticClass:"filters-inputs"},[a("div",{staticClass:"range-wrapper"},[a("input",{staticClass:"filter range",class:{disabled:!e.enabled},attrs:{id:"size",type:"range",min:"0",max:"tempo"===n?300:1,step:"tempo"===n?1:.01,disabled:!e.enabled},domProps:{value:e.value},on:{change:function(a){return t.filterValueChange(n,e.value,a)}}})]),a("input",{staticClass:"filter input",class:{disabled:!e.enabled,tempo:"tempo"===n,maxOne:"tempo"!==n},attrs:{disabled:!e.enabled},domProps:{value:"tempo"===n?Math.floor(Number(parseFloat(e.value))):Number(parseFloat(e.value).toFixed(2))},on:{change:function(a){return t.filterValueChange(n,e.value,a)}}})])]}))],2),a("div",{staticClass:"multiselect-wrapper"},[a("multiselect",{attrs:{placeholder:"Pick genres",value:t.$store.state.selected_genres,options:t.$store.state.genres,max:3,multiple:!0,taggable:!0,tagPlaceholder:"Not found",selectLabel:"Select",deselectLabel:"Remove",tagPosition:"bottom"},on:{input:t.selectGenres}},[a("span",{attrs:{slot:"maxElements"},slot:"maxElements"},[t._v("Max genres selected")])])],1),t.$store.state.logged?a("div",{staticClass:"button_add_playlist-wrapper"},[a("button",{staticClass:"button_add_playlist",class:{loading:t.loading},attrs:{disabled:t.loading},on:{click:t.createRecsPlaylist}},[t.loading?a("loading-component",{attrs:{size:20,thickness:2,"color-main":"#6bbeec","color-part":"#2b74d2"}}):a("span",[t._v("Add playlist")])],1)]):t._e()]),a("message-modal",{attrs:{message:t.message,timeout:2e3},on:{clearMessage:function(e){t.message=null}}})],1)},gt=[],vt=a("8e5f"),bt=a.n(vt),kt=a("23d1"),wt=a.n(kt),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[t.visible&&t.message?a("div",{staticClass:"message-box-wrapper"},[a("div",{staticClass:"message-box"},[a("span",{staticClass:"message-box__text"},[t._v(" "+t._s(t.message)+" ")])])]):t._e()])},yt=[],xt={name:"MessageModal",props:{message:String,timeout:Number},data:function(){return{visible:!1}},watch:{message:function(t){t&&(this.visible=!0,setTimeout(this.hide,this.timeout))}},methods:{hide:function(){this.visible=!1,this.$emit("clearMessage")}}},Ct=xt,St=(a("cf15"),Object(F["a"])(Ct,_t,yt,!1,null,"2ee026cf",null)),Rt=St.exports,$t={name:"FiltersBlock",components:{LoadingComponent:ft,MessageModal:Rt,TrackCard:rt,Multiselect:bt.a},mixins:[j],props:{track_id:String},data:function(){return{im:new wt.a("decimal",{rightAlign:!1,min:0,max:1}),imTempo:new wt.a("integer",{rightAlign:!1,min:0,max:300}),message:"",loading:!1}},mounted:function(){this.im.mask(document.getElementsByClassName("input maxOne")),this.imTempo.mask(document.getElementsByClassName("tempo"))},methods:{filterValueChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("setFilterValuesByKey",[e,n.target.value]);case 2:return t.next=4,this.updateRecommendations();case 4:case"end":return t.stop()}}),t,this)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),changeFilterState:function(t,e){var a=!t.enabled;this.$store.dispatch("changeFilterState",[e,a]),this.updateRecommendations()},updateRecommendations:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRecommendationsData(this.$store.state.activeTrack.id,this.$store.state.filters);case 2:e=t.sent,this.$store.dispatch("updateRecommendations",e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectGenres:function(t){this.$store.dispatch("selectGenres",t),this.updateRecommendations()}}},Ot=$t,Tt=(a("0e18"),Object(F["a"])(Ot,ht,gt,!1,null,null,null)),jt=Tt.exports,Pt={name:"RecommendationsComponent",components:{FiltersBlock:jt,LoadingComponent:ft,RecommendationList:ct},props:["trackId","popularity"],mixins:[j],created:function(){0===Object.keys(this.$store.state.activeTrack).length&&this.$router.push({name:"main"})},mounted:function(){if(window.localStorage.recommendations_data){var t=JSON.parse(window.localStorage.getItem("recommendations_data"));this.$store.dispatch("setRecommendationsDataFromStore",t).then((function(){window.localStorage.removeItem("recommendations_data"),console.log("Recs data cleared from storage")}))}}},Et=Pt,Ft=(a("d547"),Object(F["a"])(Et,L,G,!1,null,"37272986",null)),It=Ft.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrapper",style:{backgroundColor:t.backgroundColor}},[n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-logo"},[t.logoIcon?n("img",{staticClass:"spotifind-logo",attrs:{src:a("a406")}}):t._e()]),n("div",{staticClass:"nav-content"},[t.searchElem?n("search-component",{staticClass:"item search-wrapper"}):t._e(),n("div",{staticClass:"auth item"},[this.$store.state.logged?n("div",{staticClass:"auth-logon"},[t.user_data&&t.user_data.images[0]?n("img",{staticClass:"auth-logon icon",attrs:{src:t.user_data.images[0].url}}):t._e()]):n("div",{staticClass:"auth-nologon",on:{click:t.redirectToAuth}},[n("img",{staticClass:"auth-nologon icon",attrs:{src:a("e458")}})])])],1)])])},Nt=[],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-wrapper"},[a("search-box",{staticClass:"search-box"}),t.$store.state.foundResults&&t.$store.state.searchInputFocused?a("track-list",{staticClass:"search-track-list",attrs:{tracks:t.$store.state.foundResults.tracks.items}}):t._e()],1)},Gt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-input-wrapper"},[a("input",{staticClass:"search-input",attrs:{placeholder:"Search"},domProps:{value:t.fieldData},on:{focus:function(e){return t.$store.dispatch("searchInputFocus",!0)},blur:function(e){return t.$store.dispatch("searchInputFocus",!1)},input:function(e){t.fieldData=e.target.value}}})])},Mt=[],Dt=(a("841c"),{mixins:[j],name:"SearchBox",data:function(){return{fieldData:"",type:"track"}},watch:{fieldData:function(t){this.search(t)}},methods:{search:function(t){t?this.getSearchData(t,this.type):this.$store.dispatch("updateResults",null)}}}),Jt=Dt,Bt=(a("9c77"),Object(F["a"])(Jt,zt,Mt,!1,null,"5f0a63e3",null)),Vt=Bt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"track-list-wrapper"},[a("div",{staticClass:"track-list"},t._l(t.tracks,(function(e){return a("track-card",{key:e.id,staticClass:"track-list-card",class:{active:t.$store.state.activeTrack===e.id},attrs:{track:e,form:"rec"}})})),1)])},Ut=[],Zt=(a("4de4"),{props:["tracks"],name:"TrackList",components:{TrackCard:rt},computed:{activeTrack:function(){var t=this,e=this.tracks.filter((function(e){return e.id===t.$store.state.activeTrack.id}));return e[0]}}}),qt=Zt,Kt=(a("e6a9"),Object(F["a"])(qt,Yt,Ut,!1,null,"96281ee0",null)),Ht=Kt.exports,Qt={name:"SearchComponent",components:{TrackList:Ht,SearchBox:Vt}},Wt=Qt,Xt=(a("0b2f"),Object(F["a"])(Wt,Lt,Gt,!1,null,"2f10d1b8",null)),te=Xt.exports,ee={name:"NavPanel",components:{SearchComponent:te},data:function(){return{user_data:null,backgroundColor:null,logoIcon:!0,searchElem:!0}},created:function(){var t=this;this.$route.meta&&(this.backgroundColor=this.$route.meta.backgroundColor,this.logoIcon=this.$route.meta.logoIcon,this.searchElem=this.$route.meta.searchElem),window.localStorage.user_data&&(this.user_data=JSON.parse(window.localStorage.user_data)),window.localStorage.access_data&&this.$store.dispatch("setLoggedState",!0),window.addEventListener("setUserData",(function(){console.log("user_data:",t.user_data),t.user_data=JSON.parse(window.localStorage.user_data)})),window.addEventListener("storage",(function(e){"access_data"===e.key&&t.$store.dispatch("setLoggedState",!0),"user_data"===e.key&&(t.user_data=JSON.parse(window.localStorage.user_data),console.log(window.localStorage.user_data))}))},methods:{redirectToAuth:function(){b()}},watch:{"$route.meta":{handler:function(){var t,e;this.backgroundColor=this.$route.meta.backgroundColor,this.logoIcon=null===(t=this.$route.meta.logoIcon)||void 0===t||t,this.searchElem=null===(e=this.$route.meta.searchElem)||void 0===e||e,console.log(this.$route.meta)},deep:!0}}},ae=ee,ne=(a("f697"),Object(F["a"])(ae,At,Nt,!1,null,"76a147be",null)),re=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page-wrapper",class:{"invisible-mobile":t.$store.state.searchInputFocused||0!==Object.keys(t.$store.state.activeTrack).length}},[t._m(0),a("div",{staticClass:"search-wrapper"},[a("search-box",{staticClass:"search-box"}),t.$store.state.foundResults&&t.$store.state.searchInputFocused?a("track-list",{staticClass:"search-track-list",attrs:{tracks:t.$store.state.foundResults.tracks.items}}):t._e()],1)])},oe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spotifind-logo__big-wrapper"},[n("img",{staticClass:"spotifind-logo__big",attrs:{src:a("a406")}})])}],ie={name:"SearchMainPage",components:{TrackList:Ht,SearchBox:Vt},created:function(){this.$store.dispatch("chooseActiveTrack",{})}},ce=ie,ue=(a("c820"),Object(F["a"])(ce,se,oe,!1,null,"0f3dd177",null)),le=ue.exports,de=[{path:"",redirect:{name:"main"}},{path:"/",components:{default:le,navPanel:re},name:"main",meta:{backgroundColor:"transparent",logoIcon:!1,searchElem:!1}},{path:"/recommendations",components:{default:It,navPanel:re},name:"recommendations"}],pe=de,me=new N["a"]({routes:pe,mode:"hash",base:a("5f35").publicPath});me.beforeEach(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:n();case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}());var fe=me;n["a"].use(N["a"]),n["a"].config.productionTip=!1,R();var he=new n["a"]({render:function(t){return t(A)},router:fe,store:f}).$mount("#app")},"5f35":function(t,e,a){t.exports={publicPath:"/spotifind/"}},"647d":function(t,e,a){t.exports=a.p+"img/spotify_white.cc4e2784.png"},8563:function(t,e,a){},8592:function(t,e,a){},"85fa":function(t,e,a){},"9c77":function(t,e,a){"use strict";a("f4a5")},"9cbc":function(t,e,a){},"9d2d":function(t,e,a){},a406:function(t,e,a){t.exports=a.p+"img/SpotifindLogoV3White500.7f251912.png"},a929:function(t,e,a){},b0c6:function(t,e,a){"use strict";a("85fa")},b2fd:function(t,e,a){"use strict";a("9cbc")},b88f:function(t,e,a){"use strict";a("17fc")},c7df:function(t,e,a){},c820:function(t,e,a){"use strict";a("2a6b")},cf15:function(t,e,a){"use strict";a("9d2d")},cf25:function(t,e,a){"use strict";a("fea6")},d547:function(t,e,a){"use strict";a("3ad3")},dbbb:function(t,e,a){t.exports=a.p+"img/spotify_black.830e3cb4.png"},e458:function(t,e,a){t.exports=a.p+"img/login-icon.1286e354.png"},e6a9:function(t,e,a){"use strict";a("8563")},f4a5:function(t,e,a){},f697:function(t,e,a){"use strict";a("c7df")},fea6:function(t,e,a){}});
//# sourceMappingURL=app.6c70f297.js.map